{% extends "base.html" %}

{% block content %}
<div class="tools-container">
    <div class="tools-header">
        <h1>GPT Tokenizer Tool</h1>
        <p>Analyze and tokenize text using OpenAI's GPT models. This tool helps you understand how your text will be processed by GPT models and estimate token usage.</p>
    </div>

    <div class="tokenizer-tool">
        <div class="tool-section">
            <h2>Text Input</h2>
            <div class="input-group">
                <label for="text-input">Enter your text:</label>
                <textarea id="text-input" placeholder="Type or paste your text here..." rows="8"></textarea>
            </div>
        </div>

        <div class="tool-section">
            <h2>Model Selection</h2>
            <div class="model-selector">
                <label for="model-select">Choose GPT Model:</label>
                <select id="model-select">
                    <option value="gpt-4o">GPT-4o (o200k_base)</option>
                    <option value="gpt-4">GPT-4 (cl100k_base)</option>
                    <option value="gpt-3.5-turbo">GPT-3.5 Turbo (cl100k_base)</option>
                    <option value="text-davinci-003">Text Davinci 003 (p50k_base)</option>
                </select>
            </div>
        </div>

        <div class="tool-section">
            <h2>Analysis Results</h2>
            <div class="results-grid">
                <div class="result-card">
                    <h3>Token Count</h3>
                    <div class="result-value" id="token-count">-</div>
                </div>
                <div class="result-card">
                    <h3>Character Count</h3>
                    <div class="result-value" id="char-count">-</div>
                </div>
                <div class="result-card">
                    <h3>Word Count</h3>
                    <div class="result-value" id="word-count">-</div>
                </div>
                <div class="result-card">
                    <h3>Estimated Cost</h3>
                    <div class="result-value" id="estimated-cost">-</div>
                </div>
            </div>
        </div>

        <div class="tool-section">
            <h2>Token Visualization</h2>
            <div class="token-visualization">
                <div class="token-list" id="token-list">
                    <p class="placeholder-text">Tokens will appear here...</p>
                </div>
            </div>
        </div>

        <div class="tool-section">
            <h2>Chat Analysis</h2>
            <div class="chat-analyzer">
                <div class="chat-input">
                    <label for="chat-input">Enter chat messages (JSON format):</label>
                    <textarea id="chat-input" placeholder='[{"role": "user", "content": "Hello"}, {"role": "assistant", "content": "Hi there!"}]' rows="6"></textarea>
                </div>
                <button id="analyze-chat-btn" class="btn btn-primary">Analyze Chat</button>
                <div class="chat-results" id="chat-results" style="display: none;">
                    <h3>Chat Analysis Results</h3>
                    <div class="chat-stats" id="chat-stats"></div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://unpkg.com/gpt-tokenizer@3.0.1/dist/o200k_base.js"></script>
<script src="https://unpkg.com/gpt-tokenizer@3.0.1/dist/cl100k_base.js"></script>
<script src="https://unpkg.com/gpt-tokenizer@3.0.1/dist/p50k_base.js"></script>
<script src="{{static_prefix}}/js/tools/tokenizer.js?v={{cache_bust}}"></script>
{% endblock %} 